!function(){"use strict";const e=(e,n,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?t(n,r):o(n,r)},t=(e,t)=>{let{inactiveButtonClass:o}=t;e.disabled=!0,e.classList.add(o)},o=(e,t)=>{let{inactiveButtonClass:o}=t;e.disabled=!1,e.classList.remove(o)};document.getElementById("image-steps").src="1ed05978509cede4bbb0.png";const n=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__add-button"),a=document.querySelector(".profile__name"),s=document.querySelector(".profile__description"),l=document.querySelectorAll(".modal"),c=document.querySelector("#edit-modal"),i=c.querySelector(".modal__form"),d=c.querySelector("#profile-name-input"),u=c.querySelector("#profile-description-input"),m=document.querySelector("#add-card-modal"),p=m.querySelector(".modal__form"),_=m.querySelector(".modal__submit-button"),y=m.querySelector("#add-card-name-input"),f=m.querySelector("#add-card-link-input"),v=document.querySelector("#preview-modal"),S=v.querySelector(".modal__image"),g=v.querySelector(".modal__caption"),b=document.querySelector("#card-template"),q=document.querySelector(".cards__list");function h(e){const t=b.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return o.textContent=e.name,n.src=e.link,n.alt=e.name,r.addEventListener("click",(()=>{r.classList.toggle("card__like-button_liked")})),a.addEventListener("click",(()=>{t.remove()})),n.addEventListener("click",(()=>{w(v),S.src=e.link,g.textContent=e.name,S.alt=e.name})),t}function w(e){e.classList.add("modal_opened"),document.addEventListener("keydown",E)}function k(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",E)}function E(e){if(console.log("Key pressed:",e.key),"Escape"===e.key){const e=document.querySelector(".modal_opened");console.log("Opened modal found:",e),e&&k(e)}}var L;n.addEventListener("click",(()=>{d.value=a.textContent,u.value=s.textContent,resetValidation(i,[d,u],settings),w(c)})),l.forEach((e=>{e.addEventListener("mousedown",(t=>{(t.target.classList.contains("modal")||t.target.classList.contains("modal__close-button"))&&k(e)}))})),r.addEventListener("click",(()=>{w(m)})),i.addEventListener("submit",(function(e){e.preventDefault(),a.textContent=d.value,s.textContent=u.value,k(c)})),p.addEventListener("submit",(function(e){e.preventDefault();const t=h({name:y.value,link:f.value});q.prepend(t),p.reset(),disableButton(_,settings),k(m)})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach((e=>{const t=h(e);q.append(t)})),L={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},document.querySelectorAll(L.formSelector).forEach((t=>{((t,o)=>{const n=Array.from(t.querySelectorAll(o.inputSelector)),r=t.querySelector(o.submitButtonSelector);e(n,r,o),n.forEach((a=>{a.addEventListener("input",(function(){((e,t,o)=>{t.validity.valid?((e,t,o)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(o.inputErrorClass)})(e,t,o):((e,t,o,n)=>{e.querySelector(`#${t.id}-error`).textContent=o,t.classList.add(n.inputErrorClass)})(e,t,t.validationMessage,o)})(t,a,o),e(n,r,o)}))}))})(t,L)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0NBQ3JCcUUsZ0JBQWlCLDBCQUNqQkMsV0FBWSxnQkFxRUtoRSxTQUFTUyxpQkFBaUJ4QixFQUFPMkUsY0FDekNSLFNBQVNhLElBaEJNQyxFQUFDRCxFQUFRaEYsS0FDakMsTUFBTUYsRUFBWW9GLE1BQU1DLEtBQUtILEVBQU94RCxpQkFBaUJ4QixFQUFPNEUsZ0JBQ3REUSxFQUFnQkosRUFBTzdELGNBQWNuQixFQUFPNkUsc0JBRWxEaEYsRUFBa0JDLEVBQVdzRixFQUFlcEYsR0FFNUNGLEVBQVVxRSxTQUFTa0IsSUFDakJBLEVBQWFqQyxpQkFBaUIsU0FBUyxXQTlDaEJrQyxFQUFDTixFQUFRTyxFQUFTdkYsS0FDdEN1RixFQUFRcEYsU0FBU0MsTUFQRG9GLEVBQUNSLEVBQVFPLEVBQVN2RixLQUNwQmdGLEVBQU83RCxjQUFjLElBQUlvRSxFQUFRRSxZQUN6Q3pDLFlBQWMsR0FDekJ1QyxFQUFRNUUsVUFBVUcsT0FBT2QsRUFBTzhFLGdCQUFnQixFQU85Q1UsQ0FBZVIsRUFBUU8sRUFBU3ZGLEdBaEJiMEYsRUFBQ1YsRUFBUU8sRUFBU0ksRUFBVTNGLEtBQzlCZ0YsRUFBTzdELGNBQWMsSUFBSW9FLEVBQVFFLFlBQ3pDekMsWUFBYzJDLEVBQ3pCSixFQUFRNUUsVUFBVUMsSUFBSVosRUFBTzhFLGdCQUFnQixFQVczQ1ksQ0FBZVYsRUFBUU8sRUFBU0EsRUFBUUssa0JBQW1CNUYsRUFHN0QsRUEwQ0lzRixDQUFtQk4sRUFBUUssRUFBY3JGLEdBQ3pDSCxFQUFrQkMsRUFBV3NGLEVBQWVwRixFQUM5QyxHQUFFLEdBQ0YsRUFNQWlGLENBQWtCRCxFQUFRaEYsRUFBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGVycm9yTXNnLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gZXJyb3JNc2c7XG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xuICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpO1xuICB9XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGVuYWJsZUJ1dHRvbihidXR0b25FbCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbCwgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzIH0pID0+IHtcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICBidXR0b25FbC5jbGFzc0xpc3QuYWRkKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuY29uc3QgZW5hYmxlQnV0dG9uID0gKGJ1dHRvbkVsLCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSkgPT4ge1xuICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICBidXR0b25FbC5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbCwgaW5wdXRMaXN0LCBjb25maWcpID0+IHtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dCwgY29uZmlnKTtcbiAgICByZXNldFZhbGlkYXRpb24oZm9ybUVsLCBpbnB1dExpc3QsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG5cbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1FbCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgc3RlcHNTcmMgZnJvbSBcIi4uL2ltYWdlcy9zdGVwcy5wbmdcIjtcbmltcG9ydCB7IGVuYWJsZVZhbGlkYXRpb24sIHZhbGlkYXRpb25Db25maWcgfSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5cbmNvbnN0IHN0ZXBzSW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlLXN0ZXBzXCIpO1xuc3RlcHNJbWFnZS5zcmMgPSBzdGVwc1NyYztcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUmVzdGF1cmFudCB0ZXJyYWNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzMtcGhvdG8tYnktdHViYW51ci1kb2dhbi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzYtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXTtcblxuY29uc3QgZWRpdE1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgIENvbW1lbnQgRGl2aWRlciA9IFNoaWZ0ICsgQWx0ICsgWCAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5jb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IG5hbWVJbnB1dCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiKTtcbmNvbnN0IGRlc2NyaXB0aW9uSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xuXG5jb25zdCBjYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xuY29uc3QgY2FyZEZvcm0gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGNhcmRTdWJtaXRCdXR0b24gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiKTtcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1uYW1lLWlucHV0XCIpO1xuY29uc3QgY2FyZExpbmtJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWxpbmstaW5wdXRcIik7XG5cbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbEltYWdlRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcblxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jb250ZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmROYW1lRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkSW1hZ2VFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcblxuICBjYXJkTmFtZUVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcblxuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9saWtlZFwiKTtcbiAgfSk7XG5cbiAgY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9KTtcblxuICBjYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICAgIHByZXZpZXdNb2RhbEltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICAgIHByZXZpZXdNb2RhbENhcHRpb25FbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3TW9kYWxJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjS2V5UHJlc3MpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY0tleVByZXNzKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRWRpdEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb25JbnB1dC52YWx1ZTtcbiAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7IG5hbWU6IGNhcmROYW1lSW5wdXQudmFsdWUsIGxpbms6IGNhcmRMaW5rSW5wdXQudmFsdWUgfTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpbnB1dFZhbHVlcyk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgY2FyZEZvcm0ucmVzZXQoKTtcbiAgZGlzYWJsZUJ1dHRvbihjYXJkU3VibWl0QnV0dG9uLCBzZXR0aW5ncyk7XG4gIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcbn1cblxuZWRpdE1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24oZWRpdEZvcm1FbGVtZW50LCBbbmFtZUlucHV0LCBkZXNjcmlwdGlvbklucHV0XSwgc2V0dGluZ3MpO1xuICBvcGVuTW9kYWwoZWRpdE1vZGFsKTtcbn0pO1xuXG5tb2RhbHMuZm9yRWFjaCgobW9kYWwpID0+IHtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgaWYgKFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnV0dG9uXCIpXG4gICAgKSB7XG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZUVzY0tleVByZXNzKGV2dCkge1xuICBjb25zb2xlLmxvZyhcIktleSBwcmVzc2VkOlwiLCBldnQua2V5KTtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBvcGVuZWRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlbmVkXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiT3BlbmVkIG1vZGFsIGZvdW5kOlwiLCBvcGVuZWRNb2RhbCk7XG4gICAgaWYgKG9wZW5lZE1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG9wZW5lZE1vZGFsKTtcbiAgICB9XG4gIH1cbn1cblxuY2FyZE1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Nb2RhbChjYXJkTW9kYWwpO1xufSk7XG5cbmVkaXRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRGb3JtU3VibWl0KTtcbmNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gIGNhcmRzTGlzdC5hcHBlbmQoY2FyZEVsZW1lbnQpO1xufSk7XG5cbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZyk7XG4iXSwibmFtZXMiOlsidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbCIsImNvbmZpZyIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZW5hYmxlQnV0dG9uIiwiX3JlZiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsImNsYXNzTGlzdCIsImFkZCIsIl9yZWYyIiwicmVtb3ZlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNyYyIsImVkaXRNb2RhbEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJjYXJkTW9kYWxCdXR0b24iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsIm1vZGFscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJlZGl0TW9kYWwiLCJlZGl0Rm9ybUVsZW1lbnQiLCJuYW1lSW5wdXQiLCJkZXNjcmlwdGlvbklucHV0IiwiY2FyZE1vZGFsIiwiY2FyZEZvcm0iLCJjYXJkU3VibWl0QnV0dG9uIiwiY2FyZE5hbWVJbnB1dCIsImNhcmRMaW5rSW5wdXQiLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3TW9kYWxJbWFnZUVsIiwicHJldmlld01vZGFsQ2FwdGlvbkVsIiwiY2FyZFRlbXBsYXRlIiwiY2FyZHNMaXN0IiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZE5hbWVFbCIsImNhcmRJbWFnZUVsIiwiY2FyZExpa2VCdXR0b24iLCJjYXJkRGVsZXRlQnV0dG9uIiwidGV4dENvbnRlbnQiLCJuYW1lIiwibGluayIsImFsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0b2dnbGUiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImhhbmRsZUVzY0tleVByZXNzIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJjb25zb2xlIiwibG9nIiwia2V5Iiwib3BlbmVkTW9kYWwiLCJ2YWx1ZSIsInJlc2V0VmFsaWRhdGlvbiIsInNldHRpbmdzIiwiZm9yRWFjaCIsInRhcmdldCIsImNvbnRhaW5zIiwicHJldmVudERlZmF1bHQiLCJwcmVwZW5kIiwicmVzZXQiLCJpdGVtIiwiYXBwZW5kIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImZvcm1FbCIsInNldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwiYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNoZWNrSW5wdXRWYWxpZGl0eSIsImlucHV0RWwiLCJoaWRlSW5wdXRFcnJvciIsImlkIiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1zZyIsInZhbGlkYXRpb25NZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==